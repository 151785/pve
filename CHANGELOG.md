# 更新日志

2023.06.25

- 特化修复在Hetzner上安装需要DD系统再安装的问题，现在安装原生debian系统也支持了
- 修复部分机器使用浮动IP，没有/etc/network/interfaces文件的问题，自动生成对应文件
- 修复部分机器启动后，DNS检测失败的问题，确保在网关添加后必自动检测一次保证DNS无问题

2023.06.24

- 修复部分机器是IPV6子网前缀识别失效的问题
- 更新Debian12安装的PVE版本为stable
- 修复部分机器ifconfig命令不存在的问题
- 适配部分机器ipv6网络是SLAAC动态分配的情况
- 适配pve8.0的非订阅用户弹窗进行删除

2023.06.23

- 网关配置修改使用新结构，以便于适配大多数机器
- 调整安装的流程，升级软件包后需要重启一次系统，详见脚本的运行提示
- 解决了ifupdown2的安装问题，支持在更多商家的服务器上安装

2023.06.22

- PVE安装修复部分机器网络设置不立即重新加载的问题，增加网络设置备份
- 部分机器的IPV6物理接口使用auto类型，无法安装PVE，修改为static类型并重写配置
- 由于上面这条修复，已支持在Linode平台安装PVE了
- 修复低版本PVE还安装ifupdown2的问题，7.x以下版本使用ifupdown也足够了
- 由于上面这条修复，Hetzner的Debian10系统可以安装PVE了，但只可安装主体，不能自动设置网关

2023.06.21

- 增加手动指定IPV4地址的脚本
- PVE安装修复部分系统原生网络设置有问题的情况
- 修复NAT网关自动设置时部分机器的物理接口存在别名的情况，已自动识别替换别名

2023.06.14

- 修改ssh.sh文件以适配不同的系统启用SSH端口和服务
- 修改create_ct.sh文件及相关文件，增加适配支持开设centos系的系统的CT容器

2023.06.13

- 修改部分提示，避免错误的操作流程
- 增加对apparmor的依赖修复，避免安装apparmor在部分模板上卡死未成功安装
- 适配Debian12系统
- 重新整合组件安装部分的代码，优化代码结构
- 修改网关写入的文件，判断物理接口是否允许桥接，无配置的设置为允许

2023.06.06

- 修复检测过程中遇到系统盘以TB为单位的识别问题，适配系统盘以TB或GB单位计算
- 修复安装过程中部分奇葩模板可能出现的依赖问题，使用--fix-missing命令修复依赖

2023.06.05

- 创建IPV4的NAT网关时检测IPV4的方法改为使用ip addr show检测，不再使用ip route，这样可以带上IP区间不写死
- 自动检测IPV6子网是否存在，如果存在则绑定vmbr0，不存在则只绑定IPV4
- 更改部分说明的描述

2023.06.04

- 增加一键开设独立IPV4虚拟机的脚本，支持一键生成独立IPV4的KVM虚拟化的虚拟机
- 修改创建KVM虚拟机过程中预下载镜像前CDN检测的逻辑问题，如果已存在镜像则不再检测CDN有效性，因为无需通过CDN下载镜像文件
- 更新中文文档部分说明

2023.06.03

- 更新支持自动修复apt源缺失公钥的问题，不再需要手动修复
- 暂时移除静态动态地址转换，默认的是DHCP或静态的IP不再进行识别和转换，后续替换为别的方式解决
- NAT网络构建前检测lshw包是否存在是否需要下载，保证物理设备的识别能成功(部分奇葩的系统模板不自带该工具包)
- 更新中文文档部分说明

2023.05.30

- 更新支持批量开设的虚拟机或容器自定义系统，默认留空为debian11系统
- 更新修复使用批量开设前检测挂载盘系统盘的问题，暂时移除检测，后续修复检测
- 更新中文文档部分说明

2023.05.29 

- 增加自动写入NOTE的功能，开出的容器和虚拟机将自带对应的配置信息，不用再在命令行中使用cat查看了(但原有的配置信息文件还将存在，否则无法使用批量命令批量创建)

2023.05.20

- 增加支持开设的虚拟机和容器可自定义开设在挂载盘还是系统盘，默认留空使用系统盘local

2023.04.24 

- 更新支持国内腾讯云阿里云的Debian系安装PVE和开设LXC容器，由于国内机器非独服基本不开嵌套虚拟化支持，所以只能开LXC
- 更新支持创建vmbr0，母鸡允许addr和gateway为内网IP或外网IP，已自动识别替换

2023.04.23

- 支持一键生成LXC或KVM虚拟化的NAT服务器
- 支持批量开设，多次运行批量开设LXC或KVM虚拟化的NAT服务器，重复运行继承配置
- 开出的容器和虚拟机都自带IPV4内外网端口转发

2023.04.11 

- 更新支持一键生成单个KVM虚拟化的NAT服务器(自带内外网映射)
- 更新PVE自修改qcow2文件，已预开启安装cloudinit，开启SSH登陆，预设值SSH监听V4和V6的22端口，开启允许密码验证登陆，开启允许ROOT登陆

2023.04.04

- 开发了基于PVE的 [ConvoyPanel](https://github.com/ConvoyPanel/panel) 一键安装脚本
- PVE一键安装是ConvoyPanel一键安装的前提，创建NAT网关不是
- 修复PVE在VPS上一键安装可能遇到的各种BUG
